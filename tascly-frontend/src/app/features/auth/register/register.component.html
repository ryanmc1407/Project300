<div class="register-container">
    <div class="register-card">
        <div class="register-header">
            <h1>Create Account</h1>
            <p>Join Tascly to start managing your projects</p>
        </div>

        @if (errorMessage()) {
        <div class="error-alert">{{ errorMessage() }}</div>
        }

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
            <div class="form-group">
                <label for="username">Username</label>
                <input id="username" type="text" formControlName="username" placeholder="Choose a username"
                    [class.error]="hasError('username', 'required') || hasError('username', 'minlength')" />
                @if (hasError('username', 'required')) {
                <span class="error-message">Username is required</span>
                }
                @if (hasError('username', 'minlength')) {
                <span class="error-message">Username must be at least 3 characters</span>
                }
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input id="email" type="email" formControlName="email" placeholder="Enter your email"
                    [class.error]="hasError('email', 'required') || hasError('email', 'email')" />
                @if (hasError('email', 'required')) {
                <span class="error-message">Email is required</span>
                }
                @if (hasError('email', 'email')) {
                <span class="error-message">Please enter a valid email</span>
                }
            </div>

            <div class="form-group">
                <label for="password">Password</label>
                <input id="password" type="password" formControlName="password" placeholder="Create a password"
                    [class.error]="hasError('password', 'required') || hasError('password', 'minlength')" />
                @if (hasError('password', 'required')) {
                <span class="error-message">Password is required</span>
                }
                @if (hasError('password', 'minlength')) {
                <span class="error-message">Password must be at least 6 characters</span>
                }
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input id="confirmPassword" type="password" formControlName="confirmPassword"
                    placeholder="Confirm your password"
                    [class.error]="hasError('confirmPassword', 'required') || passwordMismatch" />
                @if (hasError('confirmPassword', 'required')) {
                <span class="error-message">Please confirm your password</span>
                }
                @if (passwordMismatch) {
                <span class="error-message">Passwords do not match</span>
                }
            </div>

            <button type="submit" class="btn-primary" [disabled]="isLoading()">
                @if (isLoading()) {
                <span>Creating account...</span>
                } @else {
                <span>Sign Up</span>
                }
            </button>
        </form>

        <div class="login-link">
            <p>Already have an account? <a routerLink="/auth/login">Sign in</a></p>
        </div>
    </div>
</div>